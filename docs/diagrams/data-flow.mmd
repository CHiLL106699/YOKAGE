%%{init: {'theme': 'dark', 'themeVariables': { 'primaryColor': '#1E3A5F', 'primaryTextColor': '#F5D78E', 'primaryBorderColor': '#D4AF37', 'lineColor': '#D4AF37', 'secondaryColor': '#0A1628', 'tertiaryColor': '#152238'}}}%%
flowchart TB
    subgraph INPUT["📥 資料輸入"]
        direction TB
        I1["👤 客戶資料"]
        I2["📅 預約記錄"]
        I3["💉 療程記錄"]
        I4["🛒 訂單記錄"]
        I5["👨‍💼 員工資料"]
        I6["📦 產品資料"]
    end
    
    subgraph PROCESS["⚙️ 資料處理"]
        direction TB
        P1["🔄 RFM 計算"]
        P2["📊 營收統計"]
        P3["⭐ NPS 計算"]
        P4["💰 佣金計算"]
        P5["📈 ROI 分析"]
        P6["📦 庫存追蹤"]
    end
    
    subgraph OUTPUT["📤 資料輸出"]
        direction TB
        O1["📊 儀表板"]
        O2["📈 報表"]
        O3["🔔 通知"]
        O4["💬 LINE 推播"]
    end
    
    I1 --> P1
    I2 --> P1
    I3 --> P1
    I4 --> P1
    
    I2 --> P2
    I3 --> P2
    I4 --> P2
    
    I3 --> P3
    
    I3 --> P4
    I4 --> P4
    I5 --> P4
    
    I1 --> P5
    I4 --> P5
    
    I4 --> P6
    I6 --> P6
    
    P1 --> O1
    P2 --> O1
    P3 --> O1
    
    P1 --> O2
    P2 --> O2
    P3 --> O2
    P4 --> O2
    P5 --> O2
    
    P1 --> O3
    P6 --> O3
    
    P1 --> O4
    O3 --> O4
    
    subgraph DETAIL["📋 資料流向詳情"]
        direction LR
        D1["客戶 → 預約 → 療程 → 滿意度"]
        D2["產品 → 訂單 → 庫存 → 警示"]
        D3["員工 → 排班 → 打卡 → 薪資"]
        D4["行銷 → 來源 → 轉換 → ROI"]
    end
